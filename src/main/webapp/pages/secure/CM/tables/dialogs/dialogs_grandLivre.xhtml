<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
      >
<h:head>
	<style>
	    .verticalText {
		  writing-mode: vertical-lr;
		  -webkit-writing-mode: vertical-lr;
		  -ms-writing-mode: vertical-lr;
		} 

	div.devise{
		padding-right : 10% !important;
 	}
 	.fa span{
	  display: inline-block !important;
	}
    </style>
</h:head>
<ui:include src="/pages/unsecure/components/header.xhtml">
	<ui:param name="title" value="Formulaire Grand Livre" />
</ui:include>
<h:body>
	<div class="col-md-1"></div>
	<h:form><div class="col-md-10" style="font-size: 18px!important;color: #5f5f5f; border:1px solid #bfbfbf; padding-bottom:70px">
		<div class="col-md-3"></div>
        <div class="col-md-6">
	        <div class="col-md-12">
	        	<!-- <h:graphicImage width="100%" value="/pages/unsecure/assets/images/mada.png" /> -->
	        	<div class="row">
                	<div class="col-lg-10 col-lg-offset-1 " style="padding-left:5%;"><h3><b>REPOBLIKAN ' I  MADAGASIKARA</b></h3></div>
 				</div>
 				<div class="row devise"><f:view contentType="text/html">
					<p:selectOneMenu id="filamatra" value="#{JasperTableExampleBean.livre.filamatra}" appendTo="@this">
                        <f:selectItems value="#{siseBean.mapDevise}" />
                    </p:selectOneMenu>	                 
                </f:view></div>
 				<br/>
	        	
	        </div>
			
			<div class="col-md-12" style="text-align: center;">
 				BUDGET GENERAL <br/>
 				SECTION : <p:inputText value ="#{JasperTableExampleBean.livre.budget}" style="text-align: center;width:75%"></p:inputText> <br/>
 				CHAPITRE(1) <p:inputText value ="#{JasperTableExampleBean.livre.chap}" style="text-align: center;width: 10%"></p:inputText>
 				ARTICLE <p:inputText value ="#{JasperTableExampleBean.livre.article}" style="text-align: center;width: 10%"></p:inputText> 
 				PARAGRAPHE <p:inputText value ="#{JasperTableExampleBean.livre.paragraphe}" style="text-align: center;width: 10%"></p:inputText><br></br>
 				(2) <p:inputText value ="#{JasperTableExampleBean.livre.libelle}"  style="text-align: center;width: 70%"></p:inputText><br></br>
 				(3) <f:view contentType="text/html">
 				<p:selectOneMenu id="directionint" value="#{JasperTableExampleBean.livre.subd}" appendTo="@this" style="width: 70% !important">
                        <f:selectItems value="#{siseBean.mapDirection(livreAnnuelBean.dir, livreAnnuelBean.d)}" />
                 </p:selectOneMenu></f:view>
 				<!-- #{livreAnnuelBean.service}--><br></br>
 				(4) <p:inputText  value ="#{livreAnnuelBean.quatre}" style="text-align: center;width: 70%"></p:inputText><br></br>
 				(5) <p:inputText  value ="#{JasperTableExampleBean.livre.indication}" style="text-align: center;width: 70%"></p:inputText><br></br>
 			</div>
        </div>
 		<div class="col-md-1"></div>
 		<div class="col-md-2" style="background-color: #efefef;">
 			<div class="col-md-12" style="text-align: center;font-size: 11px;">
 				Modèle n°02<br/>
				Article 33 de<br/>
				L’Instruction Générale<br/>du<br/>22 juillet 1955<br/>	
 			</div>
 			<div class="col-md-12" style="font-size: 11px;">
 				(1)Numéro de chapitre<br/>
				(2) libellé de chapitre<br/>
				(3) subdivision du service<br/>
				(4) magasin ou matériel en service selon qu’il s’agit d’un matériel en approvisionnement ou matériel en service.<br/>
				(5)indication du magasin ou de la catégorie du matériel en service auquel se rapporte le journal<br/>
				(6)signature du chef du service ou de son délégué<br/>
 			</div>
 		</div>
 		<div class="col-md-12" style="text-align: center;">
 			<h4>MATERIEL EN SERVICE</h4>
 			<h1>GRAND LIVRE ANNUEL #{livreAnnuelBean.anne}</h1>
 			<h3>DES MOUVEMENTS D’ENTREE ET DE SORTIE</h3>
 			<p>Nombre de feuillets  : <p:inputText value ="#{JasperTableExampleBean.livre.nbFeuillets}" style="text-align: center;"></p:inputText>
 			. A #{livreAnnuelBean.trois} le <h:outputText value="#{livreAnnuelBean.dateF}" />. </p>
 		</div><br/>
 		
 		<p:dataTable var="c" value="#{livreAnnuelBean.liste}"
			currentPageReportTemplate="({currentPage} sur {totalPages})"
			paginatorTemplate="{CurrentPageReport}  {PreviousPageLink} {PageLinks} {NextPageLink}"
			style="margin-bottom:20px; font-size:10px" emptyMessage="Aucun résultat"
			sortBy="#{c[0]}"
			widgetVar="LivreAnnuel"
			id="livreannuel"
			>
			<f:facet name="header">
    		</f:facet>
			<p:columnGroup type="header">
			<p:row>
				<p:column rowspan="3" headerText="Numéro d’ordre de la nomenclature" sortBy="#{c[0]}" style=" text-align: center; word-wrap: break-word;"/>
                <p:column rowspan="3" headerText="Espèces des unités" style=" text-align: center; word-wrap: break-word;"/>
                <p:column rowspan="3" headerText="Désignation des objets (1)" sortBy="#{c[0].design.typematerieladd.designation}" style=" text-align: center; word-wrap: break-word;"></p:column>
                <p:column rowspan="3" headerText="Prix de l’unité (en Ariary)" style=" text-align: center; word-wrap: break-word;"></p:column>
                <p:column colspan="2" headerText="Existant au 1er janvier #{livreAnnuelBean.anne}" style=" text-align: center; word-wrap: break-word;"></p:column>
                <p:column rowspan="3" headerText="Mouvements  effectués (2)" style=" text-align: center; word-wrap: break-word;"></p:column>
                <p:column colspan="9" headerText="ANNEE #{livreAnnuelBean.anne}" style=" text-align: center; word-wrap: break-word;"></p:column>
                
			</p:row>
			<p:row>
				<p:column rowspan="2" headerText="Quantité" style=" text-align: center; word-wrap: break-word;"/>
				<p:column rowspan="2" headerText="Valeur" style=" text-align: center; word-wrap: break-word;"/>
				<p:column rowspan="2" headerText="Numéros des pièces justificatives" sortBy="#{c[1].id}" style=" text-align: center; word-wrap: break-word;"/>
				<p:column rowspan="2" headerText="Dates des entrées et des sorties" style=" text-align: center; word-wrap: break-word;"/>
				<p:column rowspan="2" headerText="Origine des entrées et désignation des sorties" style=" text-align: center; word-wrap: break-word;"/>
				<p:column colspan="2" headerText="Entrées" style=" text-align: center; word-wrap: break-word;"/>
				<p:column colspan="2" headerText="Sorties" style=" text-align: center; word-wrap: break-word;"/>
				<p:column colspan="2" headerText="Reste au 31 décembre #{livreAnnuelBean.anne} " style=" text-align: center; word-wrap: break-word;"/>
			</p:row>
			<p:row>
				<p:column headerText="Quantité" style=" text-align: center; word-wrap: break-word;"/>
				<p:column headerText="Valeur" style=" text-align: center; word-wrap: break-word;"/>
				<p:column headerText="Quantité" style=" text-align: center; word-wrap: break-word;"/>
				<p:column headerText="Valeur" style=" text-align: center; word-wrap: break-word;"/>
				<p:column headerText="Quantité" style=" text-align: center; word-wrap: break-word;"/>
				<p:column headerText="Valeur" style=" text-align: center; word-wrap: break-word;"/>
			</p:row>
				
			</p:columnGroup>
			<p:column headerText="Numéro d’ordre de la nomenclature" style=" text-align: center; word-wrap: break-word;"> 
				<h:outputText value="#{c[0]}" />			
			</p:column>
			<p:column headerText="Espèces des unités" style=" text-align: center; word-wrap: break-word;"> 
				<h:outputText value="#{c[1]}" />			
			</p:column>
			<p:column headerText="Désignation des objets (1)" style=" text-align: center; word-wrap: break-word;"> 
				<h:outputText value="#{c[2]}" />			
			</p:column>
			<p:column headerText="Prix de l’unité" style=" text-align: center; word-wrap: break-word;" > 
				<h:outputText value="#{c[3]}" >
					<f:convertNumber locale="fr_BE" currencySymbol=""></f:convertNumber>
				</h:outputText>			
			</p:column>
			<p:column headerText="Quantité" style=" text-align: center; word-wrap: break-word;"> 
				<h:outputText value="#{c[5]}" />			
			</p:column>
			<p:column headerText="Valeur" style=" text-align: center; word-wrap: break-word;"> 
				<h:outputText value="#{c[3]*c[5]}" >
					<f:convertNumber locale="fr_BE" currencySymbol=""></f:convertNumber>
				</h:outputText>			
			</p:column>
			<p:column headerText="Mouvements  effectués" style=" text-align: center; word-wrap: break-word;"> 
				<h:outputText value="A remplir" />			
			</p:column>
			<p:column headerText="Numéros des pièces justificatives" style=" text-align: center; word-wrap: break-word;"> 
				<h:outputText value="#{c[6]}, #{c[7]}" />			
			</p:column>
			<p:column headerText="Dates des entrées et des sorties" style=" text-align: center; word-wrap: break-word;" > 
				<h:outputText value="#{c[14]}">
                	<f:convertDateTime pattern="dd MMMM yyyy" locale="fr-Fr" timeZone="GMT+3"/>
                </h:outputText>, 
				<h:outputText value="#{c[15]}" />			
			</p:column>
			<p:column headerText="Origine des entrées et désignation des sorties" style=" text-align: center; word-wrap: break-word;"> 
				<h:outputText value="#{c[16]}, #{c[17]}" />			
			</p:column>
			<p:column headerText="Quantité" style=" text-align: center; word-wrap: break-word;"> 
				<h:outputText value="#{c[12]}" />			
			</p:column>
			<p:column headerText="Valeur" style=" text-align: center; word-wrap: break-word;"> 
				<h:outputText value="#{c[12]*c[3]}" >
					<f:convertNumber locale="fr_BE" currencySymbol=""></f:convertNumber>
				</h:outputText>			
			</p:column>
			<p:column headerText="Quantité" style=" text-align: center; word-wrap: break-word;"> 
				<h:outputText value="#{c[13]}" />			
			</p:column>
			<p:column headerText="Valeur" style=" text-align: center; word-wrap: break-word;"> 
				<h:outputText value="#{c[13]*c[3]}" >
					<f:convertNumber locale="fr_BE" currencySymbol=""></f:convertNumber>
				</h:outputText>			
			</p:column>
			<p:column headerText="Quantité" style=" text-align: center; word-wrap: break-word;"> 
				<h:outputText value="#{c[8]}" />			
			</p:column>
			<p:column headerText="Valeur" style=" text-align: center; word-wrap: break-word;"> 
				<h:outputText value="#{c[9]}" >
					<f:convertNumber locale="fr_BE" currencySymbol=""></f:convertNumber>
				</h:outputText>			
			</p:column>
			
			


		</p:dataTable>
	</div>
	<p:commandButton styleClass="ui-priority-primary fa fa-file"  style="width:200px; height:50px;" action="#{JasperTableExampleBean.grandLivreReport(livreAnnuelBean.liste)}" type="submit" value="Exporter en PDF" ajax="false" >
		<!-- f:setPropertyActionListener target="#{JasperTableExampleBean.livre.subd}" value="#{livreAnnuelBean.service}" /-->
		<f:setPropertyActionListener target="#{JasperTableExampleBean.livre.lieu}" value="#{livreAnnuelBean.trois}" />
		<f:setPropertyActionListener target="#{JasperTableExampleBean.livre.date}" value="#{livreAnnuelBean.dateF}" />
 		<f:setPropertyActionListener target="#{JasperTableExampleBean.livre.ans}" value="#{livreAnnuelBean.anne}" />
 		<f:setPropertyActionListener target="#{JasperTableExampleBean.livre.materiel}" value="#{livreAnnuelBean.quatre}" />
	</p:commandButton>
	<br/>
	
	<p:commandButton styleClass="ui-priority-primary fa fa-file-word-o"  style="width:200px;  height:50px; " action="#{JasperTableExampleBean.grandLivreDoc(livreAnnuelBean.liste)}" type="submit" value="Exporter en Word" ajax="false" >
		<!-- f:setPropertyActionListener target="#{JasperTableExampleBean.livre.subd}" value="#{livreAnnuelBean.service}" /-->
		<f:setPropertyActionListener target="#{JasperTableExampleBean.livre.lieu}" value="#{livreAnnuelBean.trois}" />
		<f:setPropertyActionListener target="#{JasperTableExampleBean.livre.date}" value="#{livreAnnuelBean.dateF}" />
 		<f:setPropertyActionListener target="#{JasperTableExampleBean.livre.ans}" value="#{livreAnnuelBean.anne}" />
 		<f:setPropertyActionListener target="#{JasperTableExampleBean.livre.materiel}" value="#{livreAnnuelBean.quatre}" />
	</p:commandButton>
	
	</h:form>
</h:body>
	<script
        src="#{request.contextPath}/pages/unsecure/assets/lib/jquery_ui/js/jquery-ui.js"></script>
</html>