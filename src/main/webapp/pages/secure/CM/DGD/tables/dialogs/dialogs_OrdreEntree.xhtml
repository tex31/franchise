

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    >
<h:head></h:head>
<style>
	div.devise{
		padding-right : 10% !important;
	}
	.fa span{
	  display: inline-block !important;
	}
</style>
<ui:include src="/pages/unsecure/components/header.xhtml">
	<ui:param name="title" value="Formulaire Ordre Entrée" />
</ui:include>

<div class="to_pdf">
<h:form>
<div id="cont">

 	<div class="col-md-1"></div>



 	<div class="col-md-10" style="font-size: 18px!important;color: #5f5f5f;">

 		<br></br><br></br><br></br><br></br><br></br>
 			
 			<div class="col-md-3">
 				<br/>
 				(3) ..................<br/>
 				(4) ..................<br/>
 				<!-- (3) <p:selectOneMenu id="directionint" value="#{JasperTableExampleBean.ordreEB.dirc}" style="font-size: 15px;">
                        <f:selectItems value="#{siseBean.mapDirection(gacBean.curentOperation1.direction, gacBean.curentOperation1.date)}" />
                    </p:selectOneMenu><br></br>
 				(4) <h:outputText value="#{gacBean.curentOperation1.direction.quatre}"/><br></br> -->
				
 			</div>

 			<div class="col-md-6">
 				 <!-- 
 				 <h:graphicImage width="100%"
                    value="/pages/unsecure/assets/images/mada.png" /> -->
                <div class="row">
                	<div class="col-lg-10 col-lg-offset-1 " style="padding-left:5%;"><h3><b>REPOBLIKAN ' I  MADAGASIKARA</b></h3></div>
 				</div>
 				<div class="row devise"><f:view contentType="text/html">
					<p:selectOneMenu id="devise" value="#{JasperTableExampleBean.ordreEB.filamatra}">
                        <f:selectItems value="#{siseBean.mapDevise}" />
                    </p:selectOneMenu>	                 
                </f:view></div>
 				<br/>
 				
 			</div>

 			<div class="col-md-3">
 				<br/>
 				Modèle n°7
                <!--   <button id="cmd">generate PDF</button>-->
 			</div>
 		<div class="col-md-12">
 			<div class="col-md-3">
 				 1 Numéro de chapitre<br></br>
 				 2 Libelé de chapitre<br></br>
 				 3 Service <br></br>
 				 4 Subdivision de chapitre<br></br>

 			</div>

 			<div class="col-md-6" style="text-align: center;">
 			BUDGET GENERAL<br/>
 				SECTION <p:inputText value="#{JasperTableExampleBean.ordreEB.budget}" style="text-align: center;width: 50%">
 				</p:inputText>
 				
 			</div>

			<div class="col-md-3">
 				
 			</div> 	

 		</div>	

 		<div class="col-md-12">	

 			<div class="col-md-1"></div>

 			<div class="col-md-10" style="text-align: center;">
 				
 				CHAPITRE(1) <p:inputText value="#{JasperTableExampleBean.ordreEB.chap}" style="text-align: center;width: 30%"></p:inputText> 
 				ARTICLE <p:inputText value="#{JasperTableExampleBean.ordreEB.article}" style="text-align: center;width: 30%"></p:inputText> <br></br>
 				PARAGRAPHE <p:inputText value="#{JasperTableExampleBean.ordreEB.paragraphe}" style="text-align: center;width: 30%"></p:inputText><br></br>
 			</div>




 			<div class="col-md-1"></div>

 		</div>


 			<div class="col-md-12">
 				
 				Numéro d'ordre du journal : (2)  <br/>#{gacBean.curentOperation1.numentree}

 			</div>


 			<div class="col-md-12">
 				
 				<div class="col-md-3"></div>

                <div class="col-md-6"  style="text-align: center;">
                    
                    <!--   <select  style="text-align: center;">
                        <option style="text-align: center;">MATERIEL EN APPROVISIONNEMENT</option>
                        <option style="text-align: center;">MATERIEL EN SERVICE</option>
                    </select>-->
			      <h:selectOneMenu value="#{JasperTableExampleBean.ordreEB.approOuService}">
			          <f:selectItem itemLabel="MATERIEL EN APPROVISIONNEMENT" itemValue="MATERIEL EN APPROVISIONNEMENT" />
			          <f:selectItem itemLabel="MATERIEL EN SERVICE" itemValue="MATERIEL EN SERVICE" />
			      </h:selectOneMenu> 
 
                </div>

                <div class="col-md-3"></div>
 			</div>


 			<div class="col-md-12" style="text-align: center;">
 				
 				<h:graphicImage width="30%"
                    value="/pages/unsecure/assets/images/ordre.png" /><br></br>

 			
 			</div>

 			<div class="col-md-12">
			
 			Seront portés en entrée dans les écritures du comptable ..Dépositaire.. <!-- #{gacBean.curentOperation1.direction.designation}  -->les matières et objets ci-après désignés provenant de #{gacBean.curentOperation1.listMat[0].design.origine}.
			<!--  <p:inputText id="comptable1" value="#{JasperTableExampleBean.ordreEB.comptable}"  />
			<p:watermark for="comptable1" value="#{gacBean.curentOperation1.direction.designation}" />
			<p:inputText id="matiere" value="#{JasperTableExampleBean.ordreEB.matieres}"  /> 
			<p:watermark for="matiere" value="#{gacBean.curentOperation1.mat.origine}" />  -->
 		</div>


        <br></br><br></br><br></br>


 			<table>
 				<tr class="entreeo">
                    <th colspan="2"  style="border-bottom: none; text-align:center">Numéro</th>
                    <th style="border-bottom: none;text-align:center"></th>
                    <th style="border-bottom: none;text-align:center"></th>
                    <th style="border-bottom: none;text-align:center"></th>
                    <th style="border-bottom: none;text-align:center"></th>
                    <th colspan="3" style="text-align:center">Décompte</th>
                    <th style="border-bottom: none;text-align:center"></th>

 				</tr>
                <tr class="entreeo">
                    <th colspan="2" style="border-bottom: none;border-top: none;text-align:center"></th>
                    <th style="border-bottom: none;border-top: none;text-align:center"></th>
                    <th style="border-bottom: none;border-top: none;text-align:center"></th>
                    <th style="border-bottom: none;border-top: none;text-align:center"></th>
                    <th style="border-bottom: none;border-top: none;text-align:center"></th>
                    <th style="border-bottom: none;text-align:center"></th>
                    <th colspan="2" style="text-align:center">Valeurs</th>
                    <th style="border-bottom: none;border-top: none;text-align:center"></th>
                </tr>
                <tr class="entreeo">
                    <th>Du folio du grand livre </th>
                    <th> de nomenclature somaire</th>
                    <th style="border-top: none;text-align:center">Désignation des matériels et objets</th>

                    <th style="border-top: none;text-align:center">Espèce des unités</th>
                    <th style="border-top: none;text-align:center">Quantité</th>
                    <th style="border-top: none;text-align:center">Prix unitaire</th>
                    <th>Partielle</th>
                    <th>Par numero de nomanclature somaire</th>
                    <th style="border-top: none;text-align:center">Numéro de la pièce justificative de sortie ou indication de référence</th>
                </tr>

        <!-- c:forEach var="mat" items="#{gacBean.curentOperation1.listMat}"-->
        <c:set var="somme" value="${0}" />
        <c:forEach var="des" items="#{gacBean.getDesingationByOpEntree(gacBean.curentOperation1)}">
 
 				<c:forEach var="desu" items="#{des[2]}" varStatus="loop">
 				<tr class="entreeo">	
 					<c:if test="${loop.index eq 0}">
 					<td rowspan= "#{des[2].size()}" style="text-align:center"><p:inputText style="text-align: center;"></p:inputText>  </td>
                    <td rowspan= "#{des[2].size()}" style="text-align:center"> #{des[0].nomenclature}</td>
                    </c:if>
 					
 					
 					<td style="text-align:center"> #{desu[0].typematerieladd.designation} - #{desu[0].marque.designation} - #{desu[0].renseignement}</td>
 					<td style="text-align:center">#{desu[0].especeUnite}</td>
 					<td style="text-align:center">#{desu[1]}</td>
 					<td style="text-align:center">
 						<h:outputText value="#{desu[0].pu}" >
							<f:convertNumber locale="fr_BE" currencySymbol=""></f:convertNumber>		
						</h:outputText>
 					</td>
 					<!-- Partielle -->
                    <td style="text-align:center">
                    	<h:outputText value="#{desu[1]*desu[0].pu}" >
							<f:convertNumber locale="fr_BE" currencySymbol=""></f:convertNumber>		
						</h:outputText>
                    </td>
                   <!-- Nomenclature sommaire -->
                    <c:if test="${loop.index eq 0}">
                    <td rowspan= "#{des[2].size()}" style="text-align:center"> 
                    	<h:outputText value="#{des[1]}" >
							<f:convertNumber locale="fr_BE" currencySymbol=""></f:convertNumber>		
						</h:outputText>
                    </td>
                    <c:set var="somme" value="${somme+des[1]}" />
 					</c:if>
 					<td style="text-align:center">#{desu[0].refFacture}</td>
 				</tr>
 				
 				
 				</c:forEach>
 				

        </c:forEach>
			<tr class="entreeo">
 					
 					<td style="text-align:center" colspan="6"> </td>
 					
 					<!-- Partielle -->
                    <td style="text-align:center">
                    	TOTAL
                    </td>
                   <!-- Nomenclature sommaire -->
                    
                    <td style="text-align:center">
                    <h:outputText value="${somme}" >
							<f:convertNumber  locale="fr_BE" currencySymbol=""></f:convertNumber>		
						</h:outputText> 
                    	 
                    </td>
 					<td ></td>
 				</tr>
 			</table>

 			<br></br><br></br><br></br><br></br>

 			Arrêté le présent ordre d'entrée à (1) <p:inputText value="#{JasperTableExampleBean.ordreEB.ordre}" style="text-align: center;"></p:inputText> article(s) évalué(s) à la somme de (1)
         <p:inputText value="#{JasperTableExampleBean.ordreEB.somme}" style="text-align: center;"></p:inputText><br></br><br></br><br></br>

 			<div class="col-md-6">Le comptable ..Dépositaire..<!-- #{gacBean.curentOperation1.operateur.nomAgent}  -->présent en charge des matières désignées et objets désignés ci-dessus dont j'ai vérifié la concordance avec le (3) <p:inputText value="#{JasperTableExampleBean.ordreEB.concordance}" style="text-align: center;width: 30%;"></p:inputText>
 			, le 
 				<h:outputText value="#{gacBean.curentOperation1.date}">
                	<f:convertDateTime pattern="dd MMMM yyyy" locale="fr-Fr" timeZone="GMT+3"/>
                </h:outputText>
 			<br></br><br></br>
			<!-- <p:inputText id="comptable" value="#{JasperTableExampleBean.ordreEB.comptable1}"  />
			<p:watermark for="comptable" value="#{gacBean.curentOperation1.operateur.nomAgent}" />   -->
 			Le (4) <p:inputText value="#{JasperTableExampleBean.ordreEB.date2}" style="text-align: center;width: 30%;"></p:inputText>
			<br/><br/><br/><br/><br/>
			<p style="background-color:#F2F2F2;font-size: 11px!important;">
				(1)En toutes lettres.<br/>
				(2)Gestionnaire ou dépositaire.<br/>
				(3)Procès-verbal de recette, de recensement etc., ou tel
				registre ou carnet, ou la pièce de sortie correspondante.<br/>
				(4)Chef de service ou son délégué.<br/>
				(5)La date de la déclaration de prise en charge doit  concorder avec la date de l'ordre donné par le chef de service ou son délégué.
			</p> 
 			</div>

 			<div class="col-md-6">
 				A <h:outputText value="#{gacBean.curentOperation1.direction.trois}"/>
 				, le 
	 				<h:outputText value="#{gacBean.curentOperation1.date}">
	                	<f:convertDateTime pattern="dd MMMM yyyy" locale="fr-Fr" timeZone="GMT+3"/>
	                </h:outputText>
 				<br></br>
 				Le comptable (2) ..Dépositaire.. <!-- #{gacBean.curentOperation1.operateur.nomAgent} --><br/><br/><br/>
 				<p align="center">Déclaration de prise en charge</p>
 				Le comptable déclare avoir reçu et pris en charge les matières et objets mentionnés dans le tableau ci-dessus.<br></br>

 				A <h:outputText value="#{gacBean.curentOperation1.direction.trois}"/>
 				, le (5) 
	 				<h:outputText value="#{gacBean.curentOperation1.date}">
	                	<f:convertDateTime pattern="dd MMMM yyyy" locale="fr-Fr" timeZone="GMT+3"/>
	                </h:outputText>
 				<br></br>

 				Le comptable (2) ..Dépositaire.. <!-- #{gacBean.curentOperation1.operateur.nomAgent}  --> <br></br><br></br><br></br><br></br><br></br>

 			</div>

 			


 	</div>



 	<div class="col-md-1"></div>
    
</div>
	<p:commandButton styleClass="ui-priority-primary fa fa-file"  style="width:200px; height:50px; " type="submit" value="Exporter en PDF" ajax="false" action="#{JasperTableExampleBean.ordreEntreeReport(gacBean)}">
	</p:commandButton><br/>
	 <p:commandButton styleClass="ui-priority-primary fa fa-file-word-o"  style="width:200px;  height:50px; " type="submit" value="Exporter en Word" ajax="false" action="#{JasperTableExampleBean.ordreEntreeDoc(gacBean)}">
	 </p:commandButton>
</h:form>
</div>
     <script type="text/javascript" src="#{request.contextPath}/pages/unsecure/assets/js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/pages/unsecure/assets/js/jquery-ui-1.8.17.custom.min.js"></script>

    <script
        src="#{request.contextPath}/pages/unsecure/assets/js/jspdf.debug.js"></script>

    <script
        src="#{request.contextPath}/pages/unsecure/assets/js/basic.js"></script>


    <script>

 

    $('#cmd').click(function () {
            //alert($('#cont').html());
                
    var pdf = new jsPDF('p', 'pt', 'letter')

    // source can be HTML-formatted string, or a reference
    // to an actual DOM element from which the text will be scraped.
    , source = $('#cont')[0]

    // we support special element handlers. Register them with jQuery-style 
    // ID selector for either ID or node name. ("#iAmID", "div", "span" etc.)
    // There is no support for any other type of selectors 
    // (class, of compound) at this time.
    , specialElementHandlers = {
    }

    margins = {
      top: 80,
      bottom: 60,
      left: 40,
      width: 522
    };
    // all coords and widths are in jsPDF instance's declared units
    // 'inches' in this case
    pdf.fromHTML(
        source // HTML string or DOM elem ref.
        , margins.left // x coord
        , margins.top // y coord
        , {
            'width': margins.width // max width of content on PDF
            , 'elementHandlers': specialElementHandlers
        },
        function (dispose) {
          // dispose: object with X, Y of the last line add to the PDF 
          //          this allow the insertion of new lines after html
          pdf.save('Test.pdf');
        },
        margins
    )

    });


        </script>


    <script
        src="#{request.contextPath}/pages/unsecure/assets/lib/jquery/jquery.js"></script>

    <script src="#{request.contextPath}/pages/unsecure/assets/lib/jquery/jquery.js"></script>
    <script src="#{request.contextPath}/pages/unsecure/assets/js/jquery-1.11.3.min.js"></script>
  	<script src="#{request.contextPath}/pages/unsecure/assets/js/jquery-migrate-1.2.1.min.js"></script>	
		
	<script
		src="#{request.contextPath}/pages/unsecure/assets/js/moment.min.js"></script>
	<script
		src="#{request.contextPath}/pages/unsecure/assets/js/jquery-ui.min.js"></script>
	<script
		src="#{request.contextPath}/pages/unsecure/assets/js/fullcalendar.min.js"></script>
	<script
		src="#{request.contextPath}/pages/unsecure/assets/js/jquery.tablesorter.min.js"></script>
	<script
		src="#{request.contextPath}/pages/unsecure/assets/js/jquery.sparkline.min.js"></script>

    <!--Bootstrap -->
    <script
        src="#{request.contextPath}/pages/unsecure/assets/lib/bootstrap/js/bootstrap.js"></script>
    <!-- MetisMenu -->
    <script
        src="#{request.contextPath}/pages/unsecure/assets/lib/metismenu/metisMenu.js"></script>
    <!-- onoffcanvas -->
    <script
        src="#{request.contextPath}/pages/unsecure/assets/lib/onoffcanvas/onoffcanvas.js"></script>
    <!-- Screenfull -->
    <script
        src="#{request.contextPath}/pages/unsecure/assets/lib/screenfull/screenfull.js"></script>

    <script
        src="#{request.contextPath}/pages/unsecure/assets/lib/jquery_ui/js/jquery-ui.js"></script>


    <!-- Metis core scripts -->
    <script src="#{request.contextPath}/pages/unsecure/assets/js/core.js"></script>
    <!-- Metis demo scripts -->
    <!--script src="assets/js/app.js"></script>

                <script>
                    $(function() {
                      Metis.dashboard();
                    });
                </script-->

    <!-- script src="#{request.contextPath}/pages/unsecure/assets/js/style-switcher.js"></script-->


    <script type="text/javascript">

                var nix = 0;

            
                (function($) {
                    $(document).ready(function() {
                        $('.list-inline li > a').click(function() {
                            var activeForm = $(this).attr('href') + ' > form';
                            //console.log(activeForm);
                            $(activeForm).addClass('animated fadeIn');
                            //set timer to 1 seconds, after that, unload the animate animation
                            setTimeout(function() {
                                $(activeForm).removeClass('animated fadeIn');
                            }, 1000);
                        });
                    });

                })(jQuery);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 

                

            </script>
    <!--script-->


    <!--script
        src="#{request.contextPath}/pages/unsecure/assets/js/jspdf.min.js"></script-->

  


</html>

